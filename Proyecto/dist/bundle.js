(()=>{"use strict";var t;!function(t){t.image="image",t.name="name",t.status="status",t.species="species",t.type="type",t.origin="origin",t.nameoffirstepisode="nameoffirstepisode"}(t||(t={}));class e extends HTMLElement{static get observedAttributes(){return Object.keys(t)}attributeChangedCallback(t,e,n){this[t]=n}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadowRoot&&(this.shadowRoot.innerHTML=`\n            <section>\n                <img src="${this.image}">\n                <h2>${this.name}</h2>\n                <h4>${this.status}</h4>\n                <p>${this.species}</p>\n                <h5>${this.type}</h5>\n                <h5>${this.origin}</h5>\n                <h2>${this.nameoffirstepisode}</h2>\n            </section>\n            `)}}customElements.define("app-character",e);var n=function(t,e,n,i){return new(n||(n=Promise))((function(s,o){function r(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}c((i=i.apply(t,e||[])).next())}))};class i extends HTMLElement{constructor(){super(),this.create=[],this.characters=[],this.attachShadow({mode:"open"})}connectedCallback(){return n(this,void 0,void 0,(function*(){yield this.fetchCharacters(),this.mount()}))}fetchCharacters(){return n(this,void 0,void 0,(function*(){try{const s=yield(t=void 0,e=void 0,n=void 0,i=function*(){try{return yield fetch("https://rickandmortyapi.com/api/character").then((t=>t.json()))}catch(t){console.error(t)}},new(n||(n=Promise))((function(s,o){function r(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}c((i=i.apply(t,e||[])).next())})));this.characters=s.results}catch(t){console.error("Error fetching characters:",t)}var t,e,n,i}))}mount(){this.render(0),this.setupInput()}setupInput(){var t;const e=this.ownerDocument.createElement("div");e.setAttribute("id","searchBar");const i=this.ownerDocument.createElement("input");i.setAttribute("type","text"),i.setAttribute("placeholder","Ingresa el número de personajes"),e.appendChild(i);const s=this.ownerDocument.createElement("button");s.textContent="Buscar",e.appendChild(s),null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),s.addEventListener("click",(()=>n(this,void 0,void 0,(function*(){const t=parseInt(i.value||"0",10);!isNaN(t)&&t>0?yield this.render(t):alert("Por favor, ingresa un número válido.")}))))}render(e){return n(this,void 0,void 0,(function*(){if(this.shadowRoot){this.shadowRoot.querySelectorAll("app-character").forEach((t=>t.remove()));const i=this.characters.slice(0,e);(yield Promise.all(i.map((t=>n(this,void 0,void 0,(function*(){const e=t.episode[0];try{const n=yield fetch(e).then((t=>t.json()));t.nameoffirstepisode=n.name}catch(e){console.error("Error fetching episode data:",e),t.nameoffirstepisode="N/A"}return t})))))).forEach((e=>{const n=this.ownerDocument.createElement("app-character");n.setAttribute(t.image,e.image),n.setAttribute(t.name,e.name),n.setAttribute(t.status,e.status),n.setAttribute(t.species,e.species),n.setAttribute(t.type,e.type),n.setAttribute(t.origin,e.origin.name),n.setAttribute(t.nameoffirstepisode,e.nameoffirstepisode.episode||"N/A"),this.shadowRoot&&this.shadowRoot.appendChild(n)}))}}))}}customElements.define("app-container",i)})();